% ITMO Beamer Theme
% by Plotnikov Anton

%%% Loading packages useful for typesetting our slides
\usepackage{xcolor}
\usepackage{etoolbox}

\ProvidesPackage{beamer-itmo}[2016/05/22]

\usefonttheme{default} % Font theme

\setbeamertemplate{navigation symbols}{}    % Comment out to show nav. bar
\setbeamertemplate{itemize items}[circle]   % Style of bullet points
%\setbeamertemplate{theorems}[numbered]     % Number objects such as theorems and definitions

\definecolor{ITMOblue}{cmyk}{0.94,0.78,0,0}
\definecolor{ITMOgreen}{cmyk}{0.45,0,1,0}
\definecolor{ITMOred}{cmyk}{0,1,0.7,0}
\definecolor{ITMOorange}{cmyk}{0,0.59,1,0}
\setbeamercolor{WhiteOnBlue}{bg=ITMOblue,fg=white}
\setbeamercolor{BlueOnWhite}{fg=ITMOblue,bg=white}

%%% Set color of different objects (see Beamer User Guide for more info)
\usecolortheme[named=ITMOblue]{structure}
\setbeamercolor{background canvas}{bg=white}
\setbeamercolor{frametitle}{bg=ITMOblue}
\setbeamercolor{frametitle}{fg=white}
\setbeamercolor{headline}{bg=ITMOblue}
\setbeamercolor{alerted text}{fg=ITMOred}
\setbeamercolor{itemize item}{fg=ITMOblue}
\setbeamercolor{itemize subitem}{fg=ITMOblue}
\setbeamercolor{itemize subsubitem}{fg=ITMOblue}
\setbeamercolor{block title example}{fg=ITMOgreen}
\AtBeginEnvironment{exampleblock}{
    \setbeamercolor{itemize item}{fg=ITMOgreen}
    \setbeamercolor{itemize subitem}{fg=ITMOgreen}
    \setbeamercolor{itemize subsubitem}{fg=ITMOgreen}
                                 }
\setbeamercolor{palette primary}{bg=ITMOblue}
\setbeamercolor{palette primary}{fg=white}
\setbeamercolor{palette secondary}{bg=ITMOblue}
\setbeamercolor{palette secondary}{fg=white}
\setbeamercolor{palette tertiary}{bg=ITMOblue}
\setbeamercolor{palette tertiary}{fg=white}

%%% Blocks
\setbeamertemplate{blocks}[rounded][shadow=false]
\setbeamercolor{block title}{fg=white,bg=ITMOblue}
\setbeamercolor{block body}{bg=ITMOblue!10}
\setbeamercolor{block title example}{fg=white,bg=ITMOgreen}
\setbeamercolor{block body example}{bg=ITMOgreen!10}
\setbeamercolor{block title alerted}{fg=white,bg=ITMOred}
\setbeamercolor{block body alerted}{bg=ITMOred!10}


%%% Layout issues
\setbeamertemplate{headline}[default]{} % Empty headline
\setbeamertemplate{frametitle} % Frametitle with logo
{
    \nointerlineskip
    \begin{beamercolorbox}[sep=0.2cm,wd=\paperwidth]{frametitle}
		\begin{wrapfigure}{r}{0.45\textwidth}
            \vskip-3ex\includegraphics[height=40pt]{beamer-itmo/itmo_logo_rus_goriz_blue}
 		\end{wrapfigure}
 		\strut\insertframetitle

 		\small\strut\insertframesubtitle
    \end{beamercolorbox}
}

\makeatletter
\setbeamertemplate{footline} % Footline
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.2\paperwidth,ht=2ex,dp=1ex,center]{WhiteOnBlue}%
    \usebeamerfont{author in head/foot}\insertshortauthor
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.4\paperwidth,ht=2ex,dp=1ex,center]{WhiteOnBlue}%
    \usebeamerfont{title in head/foot}\insertshorttitle
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.4\paperwidth,ht=2ex,dp=1ex,right]{WhiteOnBlue}%
    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex}
  \end{beamercolorbox}}%
  \vskip0pt%
}
\makeatother

\addtobeamertemplate{title page}{%
  \setbeamercolor{background canvas}{bg=ITMOblue}
  \leavevmode%
  \vspace{-.23cm}
  \hbox{%
    \begin{beamercolorbox}[wd=\paperwidth,ht=0.4\paperheight]{frametitle}
      \begin{center}
        \includegraphics[height=0.38\paperheight]{beamer-itmo/itmo_logo_rus_vert_blue}
        \vspace{-0.025\paperheight}
      \end{center}
   \end{beamercolorbox}}
}{\vspace{3cm}}
